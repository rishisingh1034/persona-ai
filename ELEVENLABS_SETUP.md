# ElevenLabs TTS Integration Setup\n\nThis guide will help you set up ElevenLabs voice synthesis for your persona project.\n\n## üöÄ Quick Start\n\n### 1. Install Dependencies\n\nThe required dependencies have already been installed:\n```bash\nnpm install @elevenlabs/elevenlabs-js\n```\n\n### 2. Get ElevenLabs API Key\n\n1. Sign up at [ElevenLabs](https://elevenlabs.io)\n2. Go to your [API Keys page](https://elevenlabs.io/app/speech-synthesis)\n3. Create a new API key\n4. Copy the API key\n\n### 3. Configure Environment Variables\n\nUpdate the `.env.local` file with your actual values:\n\n```bash\n# ElevenLabs API Configuration\nELEVENLABS_API_KEY=your_actual_api_key_here\n\n# Voice IDs for different personas\nELEVENLABS_VOICE_ID_HITESH=your_hitesh_voice_id_here\nELEVENLABS_VOICE_ID_PIYUSH=your_piyush_voice_id_here\n\n# Optional: Model settings\nELEVENLABS_MODEL_ID=eleven_multilingual_v2\n```\n\n### 4. Get Voice IDs\n\nYou have several options for voice IDs:\n\n#### Option A: Use Pre-built Voices\n1. Visit [ElevenLabs Voice Library](https://elevenlabs.io/app/voice-lab)\n2. Browse available voices\n3. Copy the voice ID from the voice you want to use\n\n#### Option B: Clone Voices (Recommended)\n1. Upload sample audio files for Hitesh and Piyush\n2. Use the voice cloning feature to create custom voices\n3. Copy the generated voice IDs\n\n#### Option C: Use the Sample Audio\nSince you have `public/audio/hitesh.mp3`, you can:\n1. Upload this file to ElevenLabs voice cloning\n2. Create a cloned voice for Hitesh\n3. Get the voice ID\n\n### 5. Test the Integration\n\n#### Method 1: Run the test script\n```bash\n# Start your development server first\nnpm run dev\n\n# In another terminal, run the test\nnode scripts/test-tts.js\n```\n\n#### Method 2: Use the example component\n1. Import and use the `TTSExample` component in your app\n2. Or use the `useTTS` hook in your existing components\n\n## üìÅ File Structure\n\n```\nproject/\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ app/api/tts/route.ts          # TTS API endpoint with ElevenLabs\n‚îÇ   ‚îú‚îÄ‚îÄ hooks/useTTS.ts               # React hook for TTS functionality\n‚îÇ   ‚îî‚îÄ‚îÄ components/TTSExample.tsx     # Example component\n‚îú‚îÄ‚îÄ scripts/test-tts.js               # Test script\n‚îú‚îÄ‚îÄ public/\n‚îÇ   ‚îú‚îÄ‚îÄ audio/hitesh.mp3              # Sample audio for voice cloning\n‚îÇ   ‚îî‚îÄ‚îÄ generated-audio/              # Generated TTS audio files\n‚îî‚îÄ‚îÄ .env.local                        # Environment variables\n```\n\n## üéõÔ∏è API Usage\n\n### POST `/api/tts`\n\n**Request:**\n```json\n{\n  \"text\": \"Hello! This is a test message.\",\n  \"persona\": \"hitesh\"\n}\n```\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"audioUrl\": \"/generated-audio/hitesh_a1b2c3d4.mp3\",\n  \"text\": \"Hello! This is a test message.\",\n  \"persona\": \"hitesh\",\n  \"message\": \"Speech generated successfully\"\n}\n```\n\n**Response (Fallback):**\n```json\n{\n  \"success\": false,\n  \"audioUrl\": null,\n  \"voiceConfig\": {\n    \"rate\": 0.9,\n    \"pitch\": 0.8,\n    \"volume\": 1.0,\n    \"voiceIndex\": 0\n  },\n  \"text\": \"Hello! This is a test message.\",\n  \"persona\": \"hitesh\",\n  \"message\": \"Fallback to client-side synthesis\"\n}\n```\n\n### GET `/api/tts`\n\nCheck TTS service status:\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"availablePersonas\": [\"hitesh\", \"piyush\"],\n  \"modelId\": \"eleven_multilingual_v2\",\n  \"message\": \"TTS service is ready\"\n}\n```\n\n## üé™ React Hook Usage\n\n```typescript\nimport { useTTS } from '@/hooks/useTTS';\n\nfunction MyComponent() {\n  const { speak, stop, isLoading, isPlaying, error, lastAudioUrl } = useTTS({\n    autoPlay: true,\n    fallbackEnabled: true\n  });\n\n  const handleSpeak = async () => {\n    await speak('Hello world!', 'hitesh');\n  };\n\n  return (\n    <div>\n      <button onClick={handleSpeak} disabled={isLoading}>\n        {isLoading ? 'Generating...' : 'Speak'}\n      </button>\n      <button onClick={stop} disabled={!isPlaying}>\n        Stop\n      </button>\n      {error && <p>Error: {error}</p>}\n      {lastAudioUrl && <audio src={lastAudioUrl} controls />}\n    </div>\n  );\n}\n```\n\n## ‚öôÔ∏è Configuration Options\n\n### Voice Settings\n\nYou can customize voice settings in `src/app/api/tts/route.ts`:\n\n```typescript\nconst VOICE_CONFIG = {\n  hitesh: {\n    voiceId: process.env.ELEVENLABS_VOICE_ID_HITESH,\n    settings: {\n      stability: 0.5,        // 0.0 - 1.0 (more stable = less variation)\n      similarityBoost: 0.75, // 0.0 - 1.0 (higher = more similar to original)\n      style: 0.0,            // 0.0 - 1.0 (style exaggeration)\n      useSpeakerBoost: true  // Enhance speaker characteristics\n    }\n  }\n};\n```\n\n### Supported Models\n\n- `eleven_multilingual_v2` (recommended, supports multiple languages)\n- `eleven_multilingual_v1`\n- `eleven_monolingual_v1` (English only, faster)\n- `eleven_turbo_v2` (fastest, lower quality)\n\n## üîß Troubleshooting\n\n### Common Issues\n\n1. **\"ElevenLabs API key not configured\"**\n   - Make sure `.env.local` exists and contains `ELEVENLABS_API_KEY`\n   - Restart your development server after adding environment variables\n\n2. **\"Voice synthesis failed\"**\n   - Check if your voice IDs are correct\n   - Verify you have credits in your ElevenLabs account\n   - Check the console for detailed error messages\n\n3. **Audio not playing**\n   - Check browser console for audio playback errors\n   - Ensure the generated audio files are accessible\n   - Try the fallback Web Speech API\n\n4. **Character limit exceeded**\n   - ElevenLabs has a 2500 character limit per request\n   - Break long texts into smaller chunks\n\n### Debug Mode\n\nEnable debug logging by checking the browser console and server logs. The API logs detailed information about:\n- Voice ID being used\n- API responses\n- File generation status\n- Fallback activation\n\n## üí° Tips\n\n1. **Voice Cloning**: Use high-quality, clear audio samples (at least 30 seconds) for better voice cloning results\n\n2. **Caching**: The system automatically caches generated audio files to avoid regenerating the same content\n\n3. **Fallback**: Always keep the Web Speech API fallback enabled for development and testing\n\n4. **Rate Limits**: Be mindful of ElevenLabs API rate limits and usage quotas\n\n5. **File Management**: Periodically clean up old generated audio files in `public/generated-audio/`\n\n## üöÄ Production Deployment\n\nFor production deployment:\n\n1. Add environment variables to your hosting platform\n2. Ensure the `public/generated-audio` directory is writable\n3. Consider implementing a cleanup job for old audio files\n4. Monitor your ElevenLabs usage and costs\n5. Set up proper error tracking and logging\n\n## üìÑ License\n\nThis integration uses the official ElevenLabs JavaScript SDK. Check their [terms of service](https://elevenlabs.io/terms) for usage guidelines."
